<html>
    <head>
        <meta charset="utf-8"/>
        <title>Jogo Multiplayer</title>

        <style>
            #screen{
                border: 10px solid #ccc;
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                image-rendering: -moz-crisp-edges;
                width: 400px;
                height: 400px;
            }
        </style>
    </head>

    <body>
        <canvas id="screen" width="10" height="10"></canvas>
    </body>
      
    <script>
        const screen = document.getElementById("screen");
        const context = screen.getContext("2d")

        const game = {
            players: {
                'player1': {x:0, y:0},
                'player2': {x:5, y:0}
            },
            fruits:{
                'fruit1':{x:5, y:5}
            }
        }

        document.addEventListener("keydown", handleKeydown)

        var movePlayer = {

            ArrowDown: (player) => {
                player.y = player.y + 1
            },

            ArrowUp: (player) => {
                player.y = player.y - 1
            },

            ArrowRight: (player) => {
                player.x = player.x + 1
            },

            ArrowLeft: (player) => {
                player.x = player.x - 1
            }
        }
        

        function handleKeydown(event) {

            const keyPressed = event.key
            var player = game.players["player1"]

            move = movePlayer[`${keyPressed}`]
            
            if (move) {
                
                move(player)
            }
        }

        renderScreen()

        function renderScreen(){

            context.clearRect(0, 0, screen.width, screen.height);  

            for (const playerId in game.players) {

                const player = game.players[playerId];
                context.fillStyle = "gray";
                context.fillRect(player.x, player.y, 1, 1);            
            }

            for (const fruitId in game.fruits) {

                const fruit = game.fruits[fruitId];
                context.fillStyle = "green";
                context.fillRect(fruit.x, fruit.y, 1, 1);            
            }

            requestAnimationFrame(renderScreen)
        }
        
    </script>
</html>